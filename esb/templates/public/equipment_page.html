{% extends "base_public.html" %}

{% block title %}{{ equipment.name }} - {{ equipment.area.name }}{% endblock %}

{% block content %}
<div class="qr-page-hero text-center py-4">
  <h1>{{ equipment.name }}</h1>
  <p class="text-muted fs-5">{{ equipment.area.name }}</p>

  {% set variant = 'large' %}
  {% include 'components/_status_indicator.html' %}

  {% if status.color != 'green' and status.issue_description %}
  <p class="mt-3 fs-5">{{ status.issue_description }}</p>
  {% if eta %}
  <p class="text-muted">ETA: {{ eta.strftime('%b %d, %Y') }}</p>
  {% endif %}
  {% endif %}
</div>

<div class="mt-4">
  <a href="{{ url_for('public.equipment_info', id=equipment.id) }}"
     class="btn btn-outline-primary btn-lg w-100 py-3"
     aria-label="View equipment info and documentation">
    Equipment Info &amp; Documentation
  </a>
</div>

{% if open_repairs %}
<div class="mt-4">
  <h2>Known Issues</h2>
  <p class="text-muted">If your issue is listed below, it's already being worked on.</p>
  <ul class="qr-issues-list list-unstyled" aria-label="Known issues">
  {% for repair in open_repairs %}
    <li class="card mb-2 status-card status-card-{{ 'red' if repair.severity == 'Down' else 'yellow' }}">
      <div class="card-body py-2">
        <div class="d-flex justify-content-between align-items-center">
          <span class="fw-bold">{{ repair.severity or 'Not Sure' }}</span>
        </div>
        <p class="mb-0 mt-1">{{ repair.description }}</p>
      </div>
    </li>
  {% endfor %}
  </ul>
</div>
{% endif %}
{% endblock %}
