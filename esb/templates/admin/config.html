{% extends "base.html" %}

{% block title %}App Configuration - Equipment Status Board{% endblock %}

{% block content %}
<h1>Admin</h1>
{% include 'components/_admin_nav.html' %}

<h2>App Configuration</h2>

<form method="post">
    {{ form.hidden_tag() }}

    <div class="card mb-4">
        <div class="card-header">
            <h5 class="card-title mb-0">Technician Permissions</h5>
        </div>
        <div class="card-body">
            <div class="form-check mb-3">
                {{ form.tech_doc_edit_enabled(class="form-check-input") }}
                <label class="form-check-label" for="{{ form.tech_doc_edit_enabled.id }}">
                    {{ form.tech_doc_edit_enabled.label.text }}
                </label>
                <div class="form-text">
                    When enabled, Technicians can upload documents, photos, and add links to equipment records.
                    Equipment core fields (name, manufacturer, model, etc.) remain Staff-only.
                </div>
            </div>
        </div>
    </div>

    <div class="card mb-4">
        <div class="card-header">
            <h5 class="card-title mb-0">Notification Triggers</h5>
        </div>
        <div class="card-body">
            <p class="text-muted mb-3">Control which events queue Slack notifications. All triggers are enabled by default. Slack delivery requires Epic 6.</p>

            <div class="mb-3">
                <div class="form-check form-switch">
                    {{ form.notify_new_report(class="form-check-input", role="switch") }}
                    <label class="form-check-label" for="{{ form.notify_new_report.id }}">
                        {{ form.notify_new_report.label.text }}
                    </label>
                </div>
                <div class="form-text">Notify when a new problem report is submitted or repair record created.</div>
            </div>

            <div class="mb-3">
                <div class="form-check form-switch">
                    {{ form.notify_resolved(class="form-check-input", role="switch") }}
                    <label class="form-check-label" for="{{ form.notify_resolved.id }}">
                        {{ form.notify_resolved.label.text }}
                    </label>
                </div>
                <div class="form-text">Notify when a repair record is resolved or closed.</div>
            </div>

            <div class="mb-3">
                <div class="form-check form-switch">
                    {{ form.notify_severity_changed(class="form-check-input", role="switch") }}
                    <label class="form-check-label" for="{{ form.notify_severity_changed.id }}">
                        {{ form.notify_severity_changed.label.text }}
                    </label>
                </div>
                <div class="form-text">Notify when a repair record's severity level changes.</div>
            </div>

            <div class="mb-3">
                <div class="form-check form-switch">
                    {{ form.notify_eta_updated(class="form-check-input", role="switch") }}
                    <label class="form-check-label" for="{{ form.notify_eta_updated.id }}">
                        {{ form.notify_eta_updated.label.text }}
                    </label>
                </div>
                <div class="form-text">Notify when an ETA is set or updated on a repair record.</div>
            </div>
        </div>
    </div>

    {{ form.submit(class="btn btn-primary") }}
</form>
{% endblock %}
